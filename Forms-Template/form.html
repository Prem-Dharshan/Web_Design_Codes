<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form</title>
    <link rel="stylesheet" href="styles.css">
    <script>
        function validate( event ) {
            event.preventDefault();

            const email = sign_in.email.value;
            const pwd = sign_in.password.value;

            const emailRegex = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
            const passwordRegex = /^(?=.*[a-zA-Z0-9]).{8,}$/;
            // (?=.*\d)

            let errorMessage = "";

            if ( !emailRegex.test( email ) ) {
                errorMessage = "Invalid email format. Please enter a valid email address.\n";
                document.getElementsByClassName( "alert-msg" )[0].innerHTML = errorMessage;
                document.getElementById( "email" ).style.outline = "2px solid red";
            } else {
                document.getElementsByClassName( "alert-msg" )[0].innerHTML = "";
                document.getElementById( "email" ).style.outline = "2px solid green";
            }

            if ( !passwordRegex.test( pwd ) ) {
                errorMessage = "Invalid password. Password must be at least 8 characters long and contain a lowercase letter, an uppercase letter, a number, and a special character.\n";
                document.getElementsByClassName( "alert-msg" )[1].innerHTML = errorMessage;
                document.getElementById( "password" ).style.outline = "2px solid red";
            } else {
                document.getElementsByClassName( "alert-msg" )[1].innerHTML = "";
                document.getElementById( "password" ).style.outline = "2px solid green";
            }

            if ( errorMessage === "" ) {
                // Redirect to response.html with form data
                window.location.href = `./response.html?email=${encodeURIComponent( email )}&password=${encodeURIComponent( pwd )}`;
            }
        }
    </script>
</head>

<body>
    <div class="form-container">
        <form method="get" name="sign_in" onsubmit="return validate(event)">

            <div class="input-field">
                <label for="email"> Email </label>
                <input type="email" id="email" name="email">
                <span class="alert-msg"></span>
            </div>

            <div class="input-field">
                <label for="password"> Password </label>
                <input type="password" id="password" name="password">
                <span class="alert-msg"></span>
            </div>

            <div class="submit-btn">
                <button type="submit">Submit</button>
                <span class="alert-msg"></span>
            </div>

        </form>

    </div>
</body>

</html>